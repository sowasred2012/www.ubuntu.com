<div
  class="p-modal u-hide"
  id="renewal-modal"
  style="overflow: none; position: fixed; z-index: 100;"
>
  <div
    class="p-modal__dialog"
    role="dialog"
    aria-labelledby="modal-title"
    aria-describedby="modal-description"
    style="width: 700px;"
  >
    <header class="p-modal__header">
      <h2 class="p-modal__title js-renewal-name" id="modal-title">
        Renew subscription
      </h2>
    </header>
    <div id="modal-description" style="max-height: 70vh; overflow-x: scroll;">
      <ul class="p-list">
        <li class="p-list__item js-renewal-name">Plan type:</li>
        <li class="p-list__item js-renewal-start">Effective from:</li>
        <li class="p-list__item js-renewal-start">Ends:</li>
        <li class="p-list__item js-renewal-quantity">Machines:</li>
        <li class="p-list__item js-renewal-total">To pay:</li>
      </ul>

      <div id="renewal-errors" class="p-notification--negative u-hide">
        <p class="p-notification__response">
          <span class="p-notification__status">Error:</span>
          <span class="p-notification__message"></span>
        </p>
      </div>

      <form id="payment-form" method="POST" action="/advantage/payment-method">
        <fieldset>
          <label for="name">Name</label>
          <input
            name="name"
            type="text"
            required
            value="{{ openid.fullname }}"
          />

          <label for="email">Email</label>
          <input
            name="email"
            type="email"
            required
            value="{{ openid.email }}"
          />

          <label for="address">Address</label>
          <input name="address" type="text" />

          <label for="city">City</label>
          <input name="city" type="text" />

          <label for="postal_code">ZIP</label>
          <input name="postal_code" type="text" />

          {% with raw="true" %} {% include "shared/forms/_country.html" %} {%
          endwith %}

          <label>Payment information:</label>

          <div id="card-errors" class="u-hide"></div>
          <div
            id="card-element"
            style="
              background: #fff;
              border: 1px solid #999;
              border-radius: 0.125rem;
              box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.12);
              padding: 9px;
            "
          ></div>
        </fieldset>
      </form>

      <div id="payment-method-details" class="u-hide">
        <h3 class="p-heading--four">Payment method:</h3>
        <button class="p-button js-change-payment-method">Change</button>
        <div class="p-card">
          <div class="row">
            <div class="col-2 js-customer-card-brand"></div>
            <div class="col-8">
              <span class="js-customer-name"></span><br />
              <span class="js-customer-card"></span>
            </div>
            <div class="col-2 js-customer-card-expiry"></div>
          </div>
        </div>

        <p>
          A receipt will be emailed to:<br /><span
            class="js-customer-email"
          ></span>
        </p>
      </div>
    </div>
    <footer class="p-modal__footer u-align--right" style="position: relative;">
      <span
        id="js-progress-indicator"
        class="u-hide"
        style="bottom: 0; left: 0; position: absolute;"
      >
        <i class="p-icon--success u-hide"></i>
        <i class="p-icon--spinner u-animation--spin"></i>&nbsp;&nbsp;
        <span></span>
      </span>

      <button
        class="js-cancel-modal u-no-margin--bottom"
        aria-controls="renewal-modal"
      >
        Cancel
      </button>

      <button
        class="js-payment-method p-button--action u-no-margin--bottom"
        disabled
        type="submit"
      >
        Save payment details
      </button>

      <button
        class="js-process-payment p-button--action p-button--positive u-no-margin--bottom u-hide"
        disabled
        type="submit"
      >
        Pay
      </button>
    </footer>
  </div>
</div>

<script src="https://js.stripe.com/v3/"></script>

<script
  src="{{ versioned_static('js/src/renewal-modal.js') }}"
  type="module"
  defer
></script>
